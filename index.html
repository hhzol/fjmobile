<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>å…è´¹ç”µå­èŠ‚ç›®å•æœåŠ¡ - é¦–é¡µ</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f9f9f9; }
    header { background-color: #3498db; color: white; padding: 20px 0; text-align: center; }
    nav { background-color: #2980b9; padding: 10px 0; text-align: center; }
    nav a { color: white; margin: 0 15px; text-decoration: none; }
    main { padding: 20px; max-width: 800px; margin: auto; }
    section { margin-bottom: 30px; }
    h2 { color: #2c3e50; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; }
    th, td { padding: 0.75em; border: 1px solid #ccc; text-align: center; }
    th { background: #f0f0f0; }
    .guide { margin-top: 0em; background: #e0f7fa; padding-left: 1em; border-left: 4px solid #0097a7; }
    .url { font-family: monospace; color: #00796b; }
    footer { background-color: #ecf0f1; text-align: center; padding: 15px 0; color: #7f8c8d; }
  </style>
</head>
<body>
  <header>
    <h1>å…è´¹ç”µå­èŠ‚ç›®å•æœåŠ¡</h1>
    <p>æ”¯æŒå¤šç§APPï¼Œæ°¸ä¹…å…è´¹ï¼Œæ¯æ—¥è‡ªåŠ¨æ›´æ–°</p>
  </header>
  <nav>
    <a href="https://e.136605.xyz/">é¦–é¡µ</a>
    <a href="https://e.136605.xyz/download.html">è®¢é˜…åœ°å€</a>
    <a href="https://e.136605.xyz/channels.html">é¢‘é“åˆ—è¡¨</a>
    <a href="https://e.136605.xyz/convert.html">TXTè½¬M3U</a>
    <a href="mailto:hhz@136605.xyz">è”ç³»æˆ‘ä»¬</a>
  </nav>
  <main>
    <section class="guide">
      <h2>ğŸ“º é€‚ç”¨èŒƒå›´</h2>
    </section> 
    <section>
      <p>æ¬¢è¿ä¸‹è½½æœ€æ–°çš„EPGï¼ˆç”µå­èŠ‚ç›®å•ï¼‰æ–‡ä»¶ï¼Œç”¨äºæ’­æ”¾å™¨ä½¿ç”¨ã€‚åŸºç¡€é¢‘é“å’Œæ‰©å±•é¢‘é“çš„è¯¦ç»†åç§°è§<a href="https://e.136605.xyz/channels.html">é¢‘é“åˆ—è¡¨</a></p>
      <table>
        <tr>
          <th>é¢‘é“</th>
          <th>æ–‡ä»¶åç§°(æ•°æ®/å‹ç¼©åŒ…)</th>
          <th>ä¸Šæ¬¡æ›´æ–°</th>
          <th>å¯å›æ”¾æ—¥æœŸèŒƒå›´</th>
        </tr>
        <tr>
          <td>åŸºç¡€é¢‘é“(ä»Šå¤©æ•°æ®)</td>
          <td><a href="https://e.136605.xyz/1.xml">1.xml</a> / <a href="https://e.136605.xyz/1.xml.gz">1.xml.gz</a></td>
          <td><span class="update-time" id="e-xml">åŠ è½½ä¸­...</span></td>
          <td id="today"></td>
        </tr>
        <tr>
          <td>åŸºç¡€é¢‘é“(7å¤©+æ˜å2å¤©æ•°æ®)</td>
          <td><a href="https://e.136605.xyz/2.xml">2.xml</a> / <a href="https://e.136605.xyz/2.xml.gz">2.xml.gz</a></td>
          <td><span class="update-time" id="all-xml">åŠ è½½ä¸­...</span></td>
          <td id="range1"></td>
        </tr>
        <tr>
          <td>åŸºç¡€é¢‘é“(9å¤©)+æ‰©å±•é¢‘é“(7å¤©)</td>
          <td><a href="https://e.136605.xyz/3.xml">3.xml</a> / <a href="https://e.136605.xyz/3.xml.gz">3.xml.gz</a></td>
          <td><span class="update-time" id="more-xml">åŠ è½½ä¸­...</span></td>
          <td id="range2"></td>
        </tr>
      </table>
    </section>
    <section class="guide">
      <h2>ğŸ“– ä½¿ç”¨æŒ‡å—</h2>
    </section>
      <p>æ¨èä½¿ç”¨ <strong>é…·9</strong> ç­‰æ’­æ”¾å™¨ã€‚å¦‚è®¾å¤‡æ€§èƒ½ç¨å·®è¯·å°½é‡é¿å…ä¸‹è½½æˆ–è®¢é˜…å‹ç¼©åŒ…(*.gz), ä»¥å…é—ªé€€ã€‚</p>
      <p>å°†EPGæ–‡ä»¶é“¾æ¥ï¼ˆå¦‚ <span class="url">https://e.136605.xyz/3.xml.gz</span>ï¼‰ç›´æ¥æ·»åŠ åˆ°â€œEPGè®¢é˜…â€ä¸­ï¼Œä¿æŒè‡ªåŠ¨æ›´æ–°ã€‚</p>
    </main>
  <footer>
    <p>&copy; 2025 å…è´¹ç”µå­èŠ‚ç›®å•æœåŠ¡ | <a href="mailto:hhz@136605.xyz">hhz@136605.xyz</a></p>
  </footer>
<script>
document.addEventListener("DOMContentLoaded", () => {
  function formatDate(date) {
    const month = date.getMonth() + 1;
    const day = date.getDate();
    const hour = String(date.getHours()).padStart(2, '0');
    const minute = String(date.getMinutes()).padStart(2, '0');
    return `${month}æœˆ${day}æ—¥ ${hour}:${minute}`;
  }

  const today = new Date();
  const todayStr = formatDate(today).split(' ')[0]; // åªå–æ—¥æœŸéƒ¨åˆ†
  document.getElementById("today").textContent = todayStr;

  const sixDaysAgo = new Date(today);
  sixDaysAgo.setDate(today.getDate() - 6);
  const range1 = formatDate(sixDaysAgo).split(' ')[0] + " ~ " + todayStr;
  document.getElementById("range1").textContent = range1;

  const dayAfterTomorrow = new Date(today);
  dayAfterTomorrow.setDate(today.getDate() + 2);
  const range2 = formatDate(sixDaysAgo).split(' ')[0] + " ~ " + formatDate(dayAfterTomorrow).split(' ')[0];
  document.getElementById("range2").textContent = range2;

  // è·å–å½“å¤©æ—¥æœŸï¼Œæ ¼å¼ä¸ºYYYYMMDD
  function getTodayDateString() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    return `${year}${month}${day}`;
  }

  // å®šä¹‰æ–‡ä»¶åˆ—è¡¨
  const todayDate = getTodayDateString();
  const files = [
    { name: `epg_${todayDate}.xml`, elementId: 'e-xml' },
    { name: 'all.xml', elementId: 'all-xml' },
    { name: 'more.xml', elementId: 'more-xml' }
  ];

  // å®šä¹‰ fetchUpdateTime å‡½æ•°
  async function fetchUpdateTime(file) {
    const apiUrl = `https://api.github.com/repos/hhzol/fjmobile/commits?path=${file.name}&per_page=1`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) {
        document.getElementById(file.elementId).textContent = "æ— æ³•è·å–";
        return;
      }

      const data = await response.json();
      if (data.length === 0) {
        document.getElementById(file.elementId).textContent = "æœªæ‰¾åˆ°";
        return;
      }

      const commitDate = new Date(data[0].commit.committer.date);
      document.getElementById(file.elementId).textContent = formatDate(commitDate);
    } catch (error) {
      console.error(`è·å– ${file.name} å‡ºé”™:`, error);
      document.getElementById(file.elementId).textContent = "è·å–å¤±è´¥";
    }
  }

  // è°ƒç”¨ fetchUpdateTime
  files.forEach(fetchUpdateTime);
});
</script>
</body>
</html>
